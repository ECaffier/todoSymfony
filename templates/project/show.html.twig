{% extends 'base.html.twig' %}

{% block title %}Project{% endblock %}

{% block body %}
    <h1>Project</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Name</th>
                <td>{{ project.name }}</td>
            </tr>
            <tr>
                <th>Description</th>
                <td>{{ project.description }}</td>
            </tr>
            <tr>
                <th>Date_creation</th>
                <td>{{ project.dateCreation ? project.dateCreation|date('Y-m-d') : '' }}</td>
            </tr>
            <tr>
                <th>Deadline</th>
                <td>{{ project.deadline ? project.deadline|date('Y-m-d') : '' }}</td>
            </tr>
        </tbody>
    </table>



    <a class="btn btn-dark" href="{{ path('project_index') }}">back to list</a>

    <a class="btn btn-dark" href="{{ path('project_edit', {'id': project.id}) }}">edit</a>

    <a class="btn btn-dark" href="{{ path('task_new', {'projectId': project.id}) }}">Ajouter une tâche</a>

    {{ include('project/_delete_form.html.twig') }}

    <h3>Taches en cours :</h3>
        {% if project.tasks is not empty %}
            {% for task in project.tasks %}
               <div class="card my-3">
                    <div class="card-header">
                        Tache : {{task.name}}
                        <div class="card-body">
                            Description : {{task.description}}
                            Status : {{task.status}}
                            Deadline : {{task.deadline|date('Y-m-d')}}
                            <a class="btn btn-warning" href="{{ path('status_update', {'id': task.id}) }}">Terminé</a>
                            <a class="btn btn-danger" href="{{ path('task_delete', {'id': task.id}) }}">Supprimer</a>
                        </div>
                    </div>
                </div> 
            {% endfor %}
        {% else %}
            <div class="alert alert-secondary">Pas encore de tâches</div>
        {% endif %}
{% endblock %}
